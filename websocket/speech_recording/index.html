<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Speech Recording - ITSLanguage API</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Speech Recording";
    var mkdocs_page_input_path = "websocket/speech_recording.md";
    var mkdocs_page_url = "/websocket/speech_recording/index.html";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="icon icon-home"> ITSLanguage API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Home</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../index.html">ITSLanguage Speech API</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>REST API basics</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/index.html">The REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/authentication/index.html">Authentication</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Security</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/roles/index.html">Roles</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/permissions/index.html">Permissions</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/errors/index.html">Error handling</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>REST API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/oauth2/index.html">OAuth2</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/organisations/index.html">Organisations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/students/index.html">Students</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Challenges</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/speech_challenges/index.html">Speech</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/pronunciation_challenges/index.html">Pronunciation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/choice_challenges/index.html">Choice</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/recordings/index.html">Speech Recordings</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/analyses/index.html">Speech Analysis</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/recognitions/index.html">Speech Recognition</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/tenants/index.html">Tenants</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Users</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/users/index.html">Users</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/basicauths/index.html">Basic authentication</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/emailauth/index.html">Email authentication</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Websocket API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../index.html">Websocket API</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="index.html">Speech Recording</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#speech-recording">Speech Recording</a></li>
                
                    <li><a class="toctree-l4" href="#initialise-a-recording">Initialise a recording</a></li>
                
                    <li><a class="toctree-l4" href="#initialising-audio-for-uploading">Initialising audio for uploading</a></li>
                
                    <li><a class="toctree-l4" href="#initialise-recording-challenge">Initialise recording challenge</a></li>
                
                    <li><a class="toctree-l4" href="#stream-recording-audio">Stream recording audio</a></li>
                
                    <li><a class="toctree-l4" href="#close-recording">Close recording</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pronunciation_analyses/index.html">Pronunciation Analyses</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../choice_recognitions/index.html">Choice Recognitions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../audio/index.html">Audio</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Internal API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/permissions/index.html">Permissions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/architecture/index.html">Infrastructure Architecture</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ITSLanguage API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Websocket API &raquo;</li>
        
      
    
    <li>Speech Recording</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/itslanguage/itslanguage-docs/edit/master/docs/websocket/speech_recording.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="speech-recording"><a class="toclink" href="#speech-recording">Speech Recording</a></h1>
<p>Storing speech recordings is split up into multiple RPCs. Below, the various
RPCs are documented.</p>
<h2 id="initialise-a-recording"><a class="toclink" href="#initialise-a-recording">Initialise a recording</a></h2>
<p>Initialise a speech recording, this RPC should be called for each new speech
recording. A unique id is generated for a speech recording. This id is used
in the other RPCs to identify the recording,</p>
<h3 id="uri"><a class="toclink" href="#uri">URI</a></h3>
<pre><code>nl.itslanguage.recording.init_recording
</code></pre>

<h3 id="response"><a class="toclink" href="#response">Response</a></h3>
<p>The id of the new speech recording is returned as a string.</p>
<h2 id="initialising-audio-for-uploading"><a class="toclink" href="#initialising-audio-for-uploading">Initialising audio for uploading</a></h2>
<p>The audio that is to be uploaded for analysis is streamed to the server. Some
information is required in order for the server to be able to store the audio
correctly.</p>
<h3 id="uri_1"><a class="toclink" href="#uri_1">URI</a></h3>
<pre><code>nl.itslanguage.recording.init_audio
</code></pre>

<h3 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>recording_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The unique id of the speech recording.</td>
</tr>
<tr>
<td>audio_format</td>
<td><code>string</code></td>
<td><strong>Required</strong> The mimetype of the audio to upload.</td>
</tr>
</tbody>
</table>
<p>Depending on the <code>audio_format</code>, additional parameters may be required.
Please see <a href="../audio/index.html">the audio documentation</a> for which audio formats are
supported and what parameters they require.</p>
<h2 id="initialise-recording-challenge"><a class="toclink" href="#initialise-recording-challenge">Initialise recording challenge</a></h2>
<p>A challenge should be linked when storing the recording. This call verifies
asynchronously that the challenge exists. If the challenge or the organisation
doesn't exist, an error is raised. Since this happens asynchronously, the error
is raised later.</p>
<h3 id="uri_2"><a class="toclink" href="#uri_2">URI</a></h3>
<pre><code>nl.itslanguage.recording.init_challenge
</code></pre>

<h3 id="parameters_1"><a class="toclink" href="#parameters_1">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>recording_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The unique id of the speech recording.</td>
</tr>
<tr>
<td>organisation_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the organisation in which to find the challenge.</td>
</tr>
<tr>
<td>challenge_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the challenge the recording is meant for.</td>
</tr>
</tbody>
</table>
<h2 id="stream-recording-audio"><a class="toclink" href="#stream-recording-audio">Stream recording audio</a></h2>
<p>The recorded audio can now be streamed to the server. The streaming works by
repeatedly calling this RPC. Each time the RPC is called, the data
will be appended to an audio file on the server.</p>
<h3 id="uri_3"><a class="toclink" href="#uri_3">URI</a></h3>
<pre><code>nl.itslanguage.recording.write
</code></pre>

<h3 id="parameters_2"><a class="toclink" href="#parameters_2">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>recording_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The unique id of the speech recording.</td>
</tr>
<tr>
<td>data</td>
<td><code>bytes</code></td>
<td><strong>Required</strong> The data to stream to the server. This can be any length.</td>
</tr>
<tr>
<td>encoding</td>
<td><code>string</code></td>
<td><strong>Optional</strong> The encoding in which the data is sent. This should be <code>base64</code> if the data is base64 encoded.</td>
</tr>
</tbody>
</table>
<h2 id="close-recording"><a class="toclink" href="#close-recording">Close recording</a></h2>
<p>Close the recording and store it on the server. After this call, no data can be
written to the recording any more.</p>
<h3 id="uri_4"><a class="toclink" href="#uri_4">URI</a></h3>
<pre><code>nl.itslanguage.recording.close
</code></pre>

<h3 id="parameters_3"><a class="toclink" href="#parameters_3">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>recording_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The unique id of the speech recording.</td>
</tr>
</tbody>
</table>
<p>The RPC can return various errors:</p>
<ul>
<li><code>nl.itslanguage.no_such_organisation</code> If the organisation doesn't exist.</li>
<li><code>nl.itslanguage.no_such_challenge</code> If the challenge doesn't exist.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pronunciation_analyses/index.html" class="btn btn-neutral float-right" title="Pronunciation Analyses">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Websocket API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>2013-2015</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/itslanguage/itslanguage-docs/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../pronunciation_analyses/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
