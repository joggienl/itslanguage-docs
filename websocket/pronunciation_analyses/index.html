<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Pronunciation Analyses - ITSLanguage API</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Pronunciation Analyses";
    var mkdocs_page_input_path = "websocket/pronunciation_analyses.md";
    var mkdocs_page_url = "/websocket/pronunciation_analyses/index.html";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="icon icon-home"> ITSLanguage API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Home</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../index.html">ITSLanguage Speech API</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>REST API basics</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/index.html">The REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/authentication/index.html">Authentication</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Security</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/roles/index.html">Roles</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/permissions/index.html">Permissions</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/errors/index.html">Error handling</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>REST API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/oauth2/index.html">OAuth2</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/organisations/index.html">Organisations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/students/index.html">Students</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Challenges</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/speech_challenges/index.html">Speech</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/pronunciation_challenges/index.html">Pronunciation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/choice_challenges/index.html">Choice</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/recordings/index.html">Speech Recordings</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/analyses/index.html">Speech Analysis</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/recognitions/index.html">Speech Recognition</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/tenants/index.html">Tenants</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Users</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/users/index.html">Users</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/basicauths/index.html">Basic authentication</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/emailauth/index.html">Email authentication</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Websocket API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../index.html">Websocket API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../speech_recording/index.html">Speech Recording</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="index.html">Pronunciation Analyses</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#pronunciation-analyses">Pronunciation Analyses</a></li>
                
                    <li><a class="toctree-l4" href="#initialising-a-pronunciation-analysis">Initialising a pronunciation analysis</a></li>
                
                    <li><a class="toctree-l4" href="#initialise-pronunciation-challenge">Initialise pronunciation challenge</a></li>
                
                    <li><a class="toctree-l4" href="#fetch-reference-alignment">Fetch reference alignment</a></li>
                
                    <li><a class="toctree-l4" href="#initialising-audio-for-uploading">Initialising audio for uploading</a></li>
                
                    <li><a class="toctree-l4" href="#stream-analysis-audio">Stream analysis audio</a></li>
                
                    <li><a class="toctree-l4" href="#perform-the-analysis">Perform the analysis</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../choice_recognitions/index.html">Choice Recognitions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../audio/index.html">Audio</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Internal API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/permissions/index.html">Permissions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api/architecture/index.html">Infrastructure Architecture</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ITSLanguage API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Websocket API &raquo;</li>
        
      
    
    <li>Pronunciation Analyses</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/itslanguage/itslanguage-docs/edit/master/docs/websocket/pronunciation_analyses.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="pronunciation-analyses"><a class="toclink" href="#pronunciation-analyses">Pronunciation Analyses</a></h1>
<p>Performing a pronunciation analysis is broken up into various calls.</p>
<h2 id="initialising-a-pronunciation-analysis"><a class="toclink" href="#initialising-a-pronunciation-analysis">Initialising a pronunciation analysis</a></h2>
<p>This is the starting point for a pronunciation analysis. A unique analysis id
is generated, which serves a leading role in the analysis. Each other call
requires the analysis id as a parameter.</p>
<p>If other RPCs are called without this RPC being called first, the error
<code>nl.itslanguage.session_not_initialised</code> will be returned.</p>
<h3 id="uri"><a class="toclink" href="#uri">URI</a></h3>
<pre><code>nl.itslanguage.pronunciation.init_analysis
</code></pre>

<h3 id="response"><a class="toclink" href="#response">Response</a></h3>
<p>The unique analysis id is returned as a string. The id is used in other calls
to identify the current analysis.</p>
<h2 id="initialise-pronunciation-challenge"><a class="toclink" href="#initialise-pronunciation-challenge">Initialise pronunciation challenge</a></h2>
<p>Before performing the analysis, the reference audio of the challenge needs to
be prepared. This involves aligning the audio. When the RPC is called, the
challenge is initialised asynchronously. When the challenge is to be used, the
server automatically waits for the challenge initialisation to finish. If the
initialisation results in an error, the error is relayed to the client.</p>
<h3 id="uri_1"><a class="toclink" href="#uri_1">URI</a></h3>
<pre><code>nl.itslanguage.pronunciation.init_challenge
</code></pre>

<h2 id="fetch-reference-alignment"><a class="toclink" href="#fetch-reference-alignment">Fetch reference alignment</a></h2>
<p>The challenge that will be done is registered with a reference audio file to
compare the student's speech with. This will need to be fetched before being able to send
audio. This reference alignment will be given back to the caller as an intermediate result.</p>
<h3 id="uri_2"><a class="toclink" href="#uri_2">URI</a></h3>
<pre><code>nl.itslanguage.pronunciation.alignment
</code></pre>

<h2 id="initialising-audio-for-uploading"><a class="toclink" href="#initialising-audio-for-uploading">Initialising audio for uploading</a></h2>
<p>The audio that is to be uploaded for analysis is streamed to the server. Some
information is required in order for the server to be able to store and
analyse the audio correctly.</p>
<h3 id="uri_3"><a class="toclink" href="#uri_3">URI</a></h3>
<pre><code>nl.itslanguage.pronunciation.init_audio
</code></pre>

<h3 id="parameters"><a class="toclink" href="#parameters">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>analysis_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the analysis to initialise the audio for.</td>
</tr>
<tr>
<td>audio_format</td>
<td><code>string</code></td>
<td><strong>Required</strong> The mimetype of the audio to upload.</td>
</tr>
</tbody>
</table>
<p>Depending on the <code>audio_format</code>, additional parameters may be required.
Please see <a href="../audio/index.html">the audio documentation</a> for which audio formats are
supported and what parameters they require.</p>
<h3 id="parameters_1"><a class="toclink" href="#parameters_1">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>analysis_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the analysis to prepare the challenge for.</td>
</tr>
<tr>
<td>organisation_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the organisation in which to find the challenge.</td>
</tr>
<tr>
<td>challenge_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the challenge to prepare.</td>
</tr>
</tbody>
</table>
<h2 id="stream-analysis-audio"><a class="toclink" href="#stream-analysis-audio">Stream analysis audio</a></h2>
<p>The audio to be analysed can now be streamed to the server. The streaming
works by repeatedly calling this RPC. Each time the RPC is called, the data
will be appended to an audio file on the server.</p>
<h3 id="uri_4"><a class="toclink" href="#uri_4">URI</a></h3>
<pre><code>nl.itslanguage.pronunciation.write
</code></pre>

<h3 id="parameters_2"><a class="toclink" href="#parameters_2">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>analysis_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the analysis for which to upload the audio.</td>
</tr>
<tr>
<td>data</td>
<td><code>bytes</code></td>
<td><strong>Required</strong> The data to stream to the server. This can be any length.</td>
</tr>
<tr>
<td>encoding</td>
<td><code>string</code></td>
<td><strong>Optional</strong> The encoding in which the data is sent. This should be <code>base64</code> if the data is base64 encoded.</td>
</tr>
</tbody>
</table>
<h2 id="perform-the-analysis"><a class="toclink" href="#perform-the-analysis">Perform the analysis</a></h2>
<p>After completing the streaming of the audio, the analysis can be performed.</p>
<h3 id="uri_5"><a class="toclink" href="#uri_5">URI</a></h3>
<pre><code>nl.itslanguage.pronunciation.analyse
</code></pre>

<h3 id="parameters_3"><a class="toclink" href="#parameters_3">Parameters</a></h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>analysis_id</td>
<td><code>string</code></td>
<td><strong>Required</strong> The id of the analysis to perform.</td>
</tr>
</tbody>
</table>
<h3 id="response_1"><a class="toclink" href="#response_1">Response</a></h3>
<p>A JSON object with the analysis results and metadata is returned.</p>
<p>Example:</p>
<pre><code class="json">{&quot;id&quot;: &quot;98&quot;,
 &quot;audioUrl&quot;: &quot;https://api-dot-itslanguage.nl:80/organisations/1/challenges/pronunciation/4/analyses/98/audio&quot;,
 &quot;score&quot;: 8.4245,
 &quot;words&quot;: [[{&quot;graphemes&quot;: &quot;B&quot;,
             &quot;score&quot;: 9.8355,
             &quot;verdict&quot;: &quot;good&quot;,
             &quot;phonemes&quot;: [{&quot;start&quot;: 0.12,
                           &quot;end&quot;: 0.33,
                           &quot;ipa&quot;: &quot;b&quot;,
                           &quot;score&quot;: 9.8355,
                           &quot;verdict&quot;: &quot;good&quot;}]},
             {&quot;graphemes&quot;: &quot;IR&quot;,
              &quot;phonemes&quot;: [{&quot;end&quot;: 0.5,
                            &quot;ipa&quot;: &quot;er&quot;,
                            &quot;score&quot;: 5.9905,
                            &quot;start&quot;: 0.33,
                            &quot;verdict&quot;: &quot;moderate&quot;}],
              &quot;score&quot;: 5.9905,
              &quot;verdict&quot;: &quot;moderate&quot;},
             {&quot;graphemes&quot;: &quot;D&quot;,
              &quot;phonemes&quot;: [{&quot;end&quot;: 0.63,
                            &quot;ipa&quot;: &quot;d&quot;,
                            &quot;score&quot;: 7.5173,
                            &quot;start&quot;: 0.5,
                            &quot;verdict&quot;: &quot;good&quot;}],
              &quot;score&quot;: 7.5173,
              &quot;verdict&quot;: &quot;good&quot;}]]}
</code></pre>

<p>The RPC can return various errors:</p>
<ul>
<li><code>nl.itslanguage.alignment_failed</code> If the alignment of the audio failed.</li>
<li><code>nl.itslanguage.analysis_failed</code> If the analysis of the audio failed.</li>
<li><code>nl.itslanguage.no_such_organisation</code> If the organisation doesn't exist.</li>
<li><code>nl.itslanguage.no_such_challenge</code> If the challenge doesn't exist.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../choice_recognitions/index.html" class="btn btn-neutral float-right" title="Choice Recognitions">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../speech_recording/index.html" class="btn btn-neutral" title="Speech Recording"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>2013-2015</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/itslanguage/itslanguage-docs/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../speech_recording/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../choice_recognitions/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
