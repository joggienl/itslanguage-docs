<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>OAuth2 - ITSLanguage API</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "OAuth2";
    var mkdocs_page_input_path = "api/oauth2.md";
    var mkdocs_page_url = "/api/oauth2/index.html";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="icon icon-home"> ITSLanguage API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Home</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../index.html">ITSLanguage Speech API</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>REST API basics</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../index.html">The REST API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../authentication/index.html">Authentication</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Security</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../roles/index.html">Roles</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../permissions/index.html">Permissions</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../errors/index.html">Error handling</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>REST API</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="index.html">OAuth2</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#oauth2">OAuth2</a></li>
                
                    <li><a class="toctree-l4" href="#obtain-access-token">Obtain access token</a></li>
                
                    <li><a class="toctree-l4" href="#using-the-access-token">Using the access token</a></li>
                
                    <li><a class="toctree-l4" href="#impersonation">Impersonation</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../organisations/index.html">Organisations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../students/index.html">Students</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Challenges</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../speech_challenges/index.html">Speech</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pronunciation_challenges/index.html">Pronunciation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../choice_challenges/index.html">Choice</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recordings/index.html">Speech Recordings</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../analyses/index.html">Speech Analysis</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recognitions/index.html">Speech Recognition</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tenants/index.html">Tenants</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Users</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../users/index.html">Users</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../basicauths/index.html">Basic authentication</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../emailauth/index.html">Email authentication</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Websocket API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../websocket/index.html">Websocket API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../websocket/speech_recording/index.html">Speech Recording</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../websocket/pronunciation_analyses/index.html">Pronunciation Analyses</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../websocket/choice_recognitions/index.html">Choice Recognitions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../websocket/audio/index.html">Audio</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Internal API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../permissions/index.html">Permissions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../architecture/index.html">Infrastructure Architecture</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ITSLanguage API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>REST API &raquo;</li>
        
      
    
    <li>OAuth2</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/itslanguage/itslanguage-docs/edit/master/docs/api/oauth2.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="oauth2"><a class="toclink" href="#oauth2">OAuth2</a></h1>
<p>Access tokens may be requested by users to grant them access.</p>
<p>An access token can be used to make an authorised request. To do so, the
access token should be passed as an <a href="#using-the-access-token">authorization request
header</a>.</p>
<h2 id="obtain-access-token"><a class="toclink" href="#obtain-access-token">Obtain access token</a></h2>
<p>An access token can either be requested using a manual request or by using an
OAuth2 compatible client.</p>
<h3 id="request"><a class="toclink" href="#request">Request</a></h3>
<p>To request an access token, a POST request should be done to the access token
API. The body should contain the username, password, grant type (<code>password</code>)
and optional scope. To request an access token for the user <code>tenant</code> with
password <code>secret</code> and scope <code>tenant/tenant</code>, the request should look like this:</p>
<pre><code class="http">POST https://api.itslanguage.nl/tokens HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Accept: application/json

grant_type=password&amp;username=tenant&amp;password=secret&amp;scope=tenant%2Ftenant
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The scope is optional and it is best omitted when not
<a href="#impersonation">impersonating</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>Content-Type</code> of the request is different from the response.</p>
</div>
<h3 id="response"><a class="toclink" href="#response">Response</a></h3>
<p>When the supplied credentials are valid, an access token is returned as a JSON
response:</p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: no-store
Pragma: no-cache

{
    &quot;access_token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJI&quot;,
    &quot;token_type&quot;: &quot;Bearer&quot;,
    &quot;scope&quot;: &quot;tenant/tenant&quot;
}
</code></pre>

<h2 id="using-the-access-token"><a class="toclink" href="#using-the-access-token">Using the access token</a></h2>
<p>The access token can be used to make an authorised request. To do so, the
access token should be placed in the Authorization header as a bearer token.
Example:</p>
<pre><code class="http">GET https://api.itslanguage.nl/organisations HTTP/1.1
Accept: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJI
</code></pre>

<p>In cases where it is not possible to use the <code>Authorization</code> header, the token
can be supplied using a request parameter:</p>
<pre><code class="http">GET https://api.itslanguage.nl/organisations?access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJI HTTP/1.1
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example access tokens are shortened for demo purposes.</p>
</div>
<h2 id="impersonation"><a class="toclink" href="#impersonation">Impersonation</a></h2>
<p>It is possible to impersonate another user by supplying a scope when
requesting an access token. This can be convenient for a variety of reasons.</p>
<p>When a tenant wants to perform authentication for its users instead of using
the built in authentication, the tenant can use its credentials to request
tokens for its users. The token can be relayed to the end-user so the tenant
actually authenticated and impersonated the user.</p>
<p>When a top level admin user wants to perform administrative tasks for a
tenant/organisation, the admin can impersonate the appropriate
tenant/organisation.</p>
<h3 id="example-scopes"><a class="toclink" href="#example-scopes">Example scopes</a></h3>
<table>
<thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>user/barry</code></td>
<td>Top level admin user with id <code>barry</code></td>
</tr>
<tr>
<td><code>tenant/ten</code></td>
<td>Tenant with id <code>ten</code></td>
</tr>
<tr>
<td><code>tenant/demo/organisation/org</code></td>
<td>Organisation <code>org</code> in tenant <code>demo</code></td>
</tr>
<tr>
<td><code>tenant/demo/organisation/org/student/stu</code></td>
<td>Student <code>stu</code> in organisation <code>org</code> in tenant <code>demo</code></td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../organisations/index.html" class="btn btn-neutral float-right" title="Organisations">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../errors/index.html" class="btn btn-neutral" title="Error handling"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>2013-2015</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/itslanguage/itslanguage-docs/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../errors/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../organisations/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
